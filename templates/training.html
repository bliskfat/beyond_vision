<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Models</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="{{ url_for('index') }}" class="{% if request.endpoint == 'index' %}active{% endif %}">Home</a></li>
                <li><a href="{{ url_for('basics') }}" class="{% if request.endpoint == 'basics' %}active{% endif %}">Machine Learning Basics</a></li>
                {% if current_user.is_authenticated %}
                    <li><a href="{{ url_for('training') }}" class="{% if request.endpoint == 'training' %}active{% endif %}">Training Models</a></li>
                    <li><a href="{{ url_for('examples') }}" class="{% if request.endpoint == 'examples' %}active{% endif %}">Examples and Tutorials</a></li>
                    <li><a href="{{ url_for('contact') }}" class="{% if request.endpoint == 'contact' %}active{% endif %}">Contact Us</a></li>
                    <li><a href="{{ url_for('view_results') }}" class="{% if request.endpoint == 'view_results' %}active{% endif %}">Results</a></li>
                    <li><a href="{{ url_for('logout') }}">Logout</a></li>
                {% else %}
                    <li><a href="{{ url_for('register') }}" class="{% if request.endpoint == 'register' %}active{% endif %}">Register</a></li>
                    <li><a href="{{ url_for('contact') }}" class="{% if request.endpoint == 'contact' %}active{% endif %}">Contact Us</a></li>
                    <li><a href="{{ url_for('login') }}" class="{% if request.endpoint == 'login' %}active{% endif %}">Login</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>
    <main>
        <h1>Training Machine Learning Models</h1>
        <p>Learn how to train your own machine learning models with various techniques and algorithms.</p>

        <section id="step-by-step-guide">
            <h2>Step-by-Step Guide to Training a Machine Learning Model</h2>
            <!-- Your content here -->

            <div id="training-form">
                <form id="trainForm">
                    <label for="epochs">Epochs:</label>
                    <input type="number" id="epochs" name="epochs" value="50"><br><br>
                    <label for="learning_rate">Learning Rate:</label>
                    <input type="number" id="learning_rate" name="learning_rate" step="0.001" value="0.01"><br><br>
                    <label for="layers">Layers:</label>
                    <input type="number" id="layers" name="layers" value="2"><br><br>
                    <label for="neurons">Neurons:</label>
                    <input type="number" id="neurons" name="neurons" value="10"><br><br>
                    <input type="submit" value="Train Model">
                </form>
                <div id="training-status">
                    <progress id="training-progress" value="0" max="100"></progress>
                    <p id="training-message"></p>
                </div>
                <div id="training-results">
                    <h3>Training Results</h3>
                    <div id="loss-graph"></div>
                    <div id="accuracy-graph"></div>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Machine Learning Basics. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.getElementById('trainForm').onsubmit = async function(event) {
            event.preventDefault();
            const form = event.target;
            const epochs = form.epochs.value;
            const learning_rate = form.learning_rate.value;
            const layers = form.layers.value;
            const neurons = form.neurons.value;

            const response = await fetch('/train', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    epochs: epochs,
                    learning_rate: learning_rate,
                    layers: layers,
                    neurons: neurons
                })
            });
            const data = await response.json();

            const progressElem = document.getElementById('training-progress');
            const messageElem = document.getElementById('training-message');
            const lossGraphElem = document.getElementById('loss-graph');
            const accuracyGraphElem = document.getElementById('accuracy-graph');

            progressElem.value = 100;
            messageElem.innerText = 'Training completed';

            const lossChart = new Chart(lossGraphElem, {
                type: 'line',
                data: {
                    labels: data.progress.map(p => p[0]),
                    datasets: [{
                        label: 'Loss',
                        data: data.loss,
                        borderColor: 'red',
                        fill: false
                    }]
                }
            });

            const accuracyChart = new Chart(accuracyGraphElem, {
                type: 'line',
                data: {
                    labels: data.progress.map(p => p[0]),
                    datasets: [{
                        label: 'Accuracy',
                        data: data.accuracy,
                        borderColor: 'blue',
                        fill: false
                    }]
                }
            });
        };
    </script>
</body>
</html>
